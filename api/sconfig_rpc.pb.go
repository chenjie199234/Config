// Code generated by protoc-gen-go-rpc. DO NOT EDIT.

package api

import (
	context "context"
	rpc "github.com/chenjie199234/Corelib/rpc"
	error1 "github.com/chenjie199234/Corelib/util/error"
	metadata "github.com/chenjie199234/Corelib/util/metadata"
	proto "github.com/golang/protobuf/proto"
	time "time"
)

var RpcPathSconfigSinfo = "/config.Sconfig/Sinfo"
var RpcPathSconfigSset = "/config.Sconfig/Sset"
var RpcPathSconfigSget = "/config.Sconfig/Sget"
var RpcPathSconfigSgroups = "/config.Sconfig/Sgroups"
var RpcPathSconfigSapps = "/config.Sconfig/Sapps"

// SconfigRpcClient is the client API for Sconfig service.
type SconfigRpcClient interface {
	//one specific app's current info
	Sinfo(context.Context, *Sinforeq) (*Sinforesp, error)
	//set one specific app's config
	Sset(context.Context, *Ssetreq) (*Ssetresp, error)
	//get one specific app's config
	Sget(context.Context, *Sgetreq) (*Sgetresp, error)
	//get all groups
	Sgroups(context.Context, *Sgroupsreq) (*Sgroupsresp, error)
	//get all apps
	Sapps(context.Context, *Sappsreq) (*Sappsresp, error)
}

type sconfigRpcClient struct {
	cc *rpc.RpcClient
}

//has race,will only return the first's call's client,the config will use the first call's config
func NewSconfigRpcClient(timeout, conntimeout, hearttimeout, heartprobe time.Duration, selfgroup, selfname string, verifydata string, picker rpc.PickHandler, discover rpc.DiscoveryHandler) (SconfigRpcClient, error) {
	c := &rpc.Config{
		Timeout:                time.Duration(timeout),
		ConnTimeout:            time.Duration(conntimeout),
		HeartTimeout:           time.Duration(hearttimeout),
		HeartPorbe:             time.Duration(heartprobe),
		GroupNum:               1,
		SocketRBuf:             1024,
		SocketWBuf:             1024,
		MaxMsgLen:              65535,
		MaxBufferedWriteMsgNum: 1024,
	}
	cc, e := rpc.NewRpcClient(c, selfgroup, selfname, verifydata, Group, Name, picker, discover)
	if e != nil {
		return nil, e
	}
	return &sconfigRpcClient{cc: cc}, nil
}

func (c *sconfigRpcClient) Sinfo(ctx context.Context, req *Sinforeq) (*Sinforesp, error) {
	if req == nil {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Groupname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Appname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	reqd, _ := proto.Marshal(req)
	callback, e := c.cc.Call(ctx, 500000000, RpcPathSconfigSinfo, reqd, metadata.GetAllMetadata(ctx))
	if e.(*error1.Error) != nil {
		return nil, e
	}
	resp := new(Sinforesp)
	if e := proto.Unmarshal(callback, resp); e != nil {
		return nil, rpc.ERRRESPONSE
	}
	return resp, nil
}
func (c *sconfigRpcClient) Sset(ctx context.Context, req *Ssetreq) (*Ssetresp, error) {
	if req == nil {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Groupname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Appname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	reqd, _ := proto.Marshal(req)
	callback, e := c.cc.Call(ctx, 500000000, RpcPathSconfigSset, reqd, metadata.GetAllMetadata(ctx))
	if e.(*error1.Error) != nil {
		return nil, e
	}
	resp := new(Ssetresp)
	if e := proto.Unmarshal(callback, resp); e != nil {
		return nil, rpc.ERRRESPONSE
	}
	return resp, nil
}
func (c *sconfigRpcClient) Sget(ctx context.Context, req *Sgetreq) (*Sgetresp, error) {
	if req == nil {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Groupname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Appname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Id) == 0 {
		return nil, rpc.ERRREQUEST
	}
	reqd, _ := proto.Marshal(req)
	callback, e := c.cc.Call(ctx, 500000000, RpcPathSconfigSget, reqd, metadata.GetAllMetadata(ctx))
	if e.(*error1.Error) != nil {
		return nil, e
	}
	resp := new(Sgetresp)
	if e := proto.Unmarshal(callback, resp); e != nil {
		return nil, rpc.ERRRESPONSE
	}
	return resp, nil
}
func (c *sconfigRpcClient) Sgroups(ctx context.Context, req *Sgroupsreq) (*Sgroupsresp, error) {
	if req == nil {
		return nil, rpc.ERRREQUEST
	}
	reqd, _ := proto.Marshal(req)
	callback, e := c.cc.Call(ctx, 500000000, RpcPathSconfigSgroups, reqd, metadata.GetAllMetadata(ctx))
	if e.(*error1.Error) != nil {
		return nil, e
	}
	resp := new(Sgroupsresp)
	if e := proto.Unmarshal(callback, resp); e != nil {
		return nil, rpc.ERRRESPONSE
	}
	return resp, nil
}
func (c *sconfigRpcClient) Sapps(ctx context.Context, req *Sappsreq) (*Sappsresp, error) {
	if req == nil {
		return nil, rpc.ERRREQUEST
	}
	//empty check
	if len(req.Groupname) == 0 {
		return nil, rpc.ERRREQUEST
	}
	reqd, _ := proto.Marshal(req)
	callback, e := c.cc.Call(ctx, 500000000, RpcPathSconfigSapps, reqd, metadata.GetAllMetadata(ctx))
	if e.(*error1.Error) != nil {
		return nil, e
	}
	resp := new(Sappsresp)
	if e := proto.Unmarshal(callback, resp); e != nil {
		return nil, rpc.ERRRESPONSE
	}
	return resp, nil
}

// SconfigRpcServer is the server API for Sconfig service.
type SconfigRpcServer interface {
	//one specific app's current info
	Sinfo(context.Context, *Sinforeq) (*Sinforesp, error)
	//set one specific app's config
	Sset(context.Context, *Ssetreq) (*Ssetresp, error)
	//get one specific app's config
	Sget(context.Context, *Sgetreq) (*Sgetresp, error)
	//get all groups
	Sgroups(context.Context, *Sgroupsreq) (*Sgroupsresp, error)
	//get all apps
	Sapps(context.Context, *Sappsreq) (*Sappsresp, error)
}

func _Sconfig_Sinfo_RpcHandler(handler func(context.Context, *Sinforeq) (*Sinforesp, error)) rpc.OutsideHandler {
	return func(ctx *rpc.Context) {
		req := new(Sinforeq)
		if e := proto.Unmarshal(ctx.GetBody(), req); e != nil {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Groupname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Appname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		resp, e := handler(ctx, req)
		if e != nil {
			ctx.Abort(e)
			return
		}
		if resp == nil {
			resp = new(Sinforesp)
		}
		respd, _ := proto.Marshal(resp)
		ctx.Write(respd)
	}
}
func _Sconfig_Sset_RpcHandler(handler func(context.Context, *Ssetreq) (*Ssetresp, error)) rpc.OutsideHandler {
	return func(ctx *rpc.Context) {
		req := new(Ssetreq)
		if e := proto.Unmarshal(ctx.GetBody(), req); e != nil {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Groupname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Appname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		resp, e := handler(ctx, req)
		if e != nil {
			ctx.Abort(e)
			return
		}
		if resp == nil {
			resp = new(Ssetresp)
		}
		respd, _ := proto.Marshal(resp)
		ctx.Write(respd)
	}
}
func _Sconfig_Sget_RpcHandler(handler func(context.Context, *Sgetreq) (*Sgetresp, error)) rpc.OutsideHandler {
	return func(ctx *rpc.Context) {
		req := new(Sgetreq)
		if e := proto.Unmarshal(ctx.GetBody(), req); e != nil {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Groupname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Appname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Id) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		resp, e := handler(ctx, req)
		if e != nil {
			ctx.Abort(e)
			return
		}
		if resp == nil {
			resp = new(Sgetresp)
		}
		respd, _ := proto.Marshal(resp)
		ctx.Write(respd)
	}
}
func _Sconfig_Sgroups_RpcHandler(handler func(context.Context, *Sgroupsreq) (*Sgroupsresp, error)) rpc.OutsideHandler {
	return func(ctx *rpc.Context) {
		req := new(Sgroupsreq)
		if e := proto.Unmarshal(ctx.GetBody(), req); e != nil {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		resp, e := handler(ctx, req)
		if e != nil {
			ctx.Abort(e)
			return
		}
		if resp == nil {
			resp = new(Sgroupsresp)
		}
		respd, _ := proto.Marshal(resp)
		ctx.Write(respd)
	}
}
func _Sconfig_Sapps_RpcHandler(handler func(context.Context, *Sappsreq) (*Sappsresp, error)) rpc.OutsideHandler {
	return func(ctx *rpc.Context) {
		req := new(Sappsreq)
		if e := proto.Unmarshal(ctx.GetBody(), req); e != nil {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		//empty check
		if len(req.Groupname) == 0 {
			ctx.Abort(rpc.ERRREQUEST)
			return
		}
		resp, e := handler(ctx, req)
		if e != nil {
			ctx.Abort(e)
			return
		}
		if resp == nil {
			resp = new(Sappsresp)
		}
		respd, _ := proto.Marshal(resp)
		ctx.Write(respd)
	}
}
func RegisterSconfigRpcServer(engine *rpc.RpcServer, svc SconfigRpcServer, allmids map[string]rpc.OutsideHandler) error {
	//avoid lint
	_ = allmids
	if e := engine.RegisterHandler(RpcPathSconfigSinfo, 500000000, _Sconfig_Sinfo_RpcHandler(svc.Sinfo)); e != nil {
		return e
	}
	if e := engine.RegisterHandler(RpcPathSconfigSset, 500000000, _Sconfig_Sset_RpcHandler(svc.Sset)); e != nil {
		return e
	}
	if e := engine.RegisterHandler(RpcPathSconfigSget, 500000000, _Sconfig_Sget_RpcHandler(svc.Sget)); e != nil {
		return e
	}
	if e := engine.RegisterHandler(RpcPathSconfigSgroups, 500000000, _Sconfig_Sgroups_RpcHandler(svc.Sgroups)); e != nil {
		return e
	}
	if e := engine.RegisterHandler(RpcPathSconfigSapps, 500000000, _Sconfig_Sapps_RpcHandler(svc.Sapps)); e != nil {
		return e
	}
	return nil
}
